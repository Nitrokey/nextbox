import _set from "lodash/set";
import _merge from "lodash/merge";
import React from 'react';
import { storiesOf } from '@storybook/react';
import { ASSET_ENTRY_TYPE, ASSET_FILE_TYPE, ASSET_FILTERS, FILE_TYPE_JS, createJobs } from '@bundle-stats/utils';
import baselineStats from '../../../__mocks__/webpack-stats.baseline.json';
import currentStats from '../../../__mocks__/webpack-stats.current.json';
import { getWrapperDecorator } from '../../stories';
import { BundleAssets } from '.';
var JOBS = createJobs([{
  webpack: currentStats
}, {
  webpack: baselineStats
}]);
var currentJob = JOBS[0],
    baselineJob = JOBS[1];
var stories = storiesOf('Components/BundleAssets', module);
stories.addDecorator(getWrapperDecorator());
stories.add('default', function () {
  return /*#__PURE__*/React.createElement(BundleAssets, {
    jobs: [baselineJob]
  });
});
stories.add('multiple jobs', function () {
  return /*#__PURE__*/React.createElement(BundleAssets, {
    jobs: JOBS
  });
});
stories.add('custom filters', function () {
  var _ref;

  return /*#__PURE__*/React.createElement(BundleAssets, {
    jobs: JOBS,
    filters: (_ref = {}, _ref[ASSET_ENTRY_TYPE + "." + ASSET_FILTERS.ENTRY] = true, _ref[ASSET_FILE_TYPE + "." + FILE_TYPE_JS] = true, _ref)
  });
});
var JOBS_EMPTY_BASELINE = createJobs([{
  webpack: currentStats
}, null]);
stories.add('empty baseline', function () {
  return /*#__PURE__*/React.createElement(BundleAssets, {
    jobs: JOBS_EMPTY_BASELINE
  });
});
stories.add('no assets', function () {
  return /*#__PURE__*/React.createElement(BundleAssets, {
    jobs: JOBS.map(function (job) {
      return _set(_merge({}, job), 'metrics.webpack.assets', {});
    })
  });
});
stories.add('empty filtered data', function () {
  return /*#__PURE__*/React.createElement(BundleAssets, {
    jobs: [_set(_merge({}, currentJob), 'metrics.webpack.assets', {
      'main.js': {
        value: 100
      }
    }), _set(_merge({}, baselineJob), 'metrics.webpack.assets', {
      'main.js': {
        value: 100
      }
    })]
  });
});
stories.add('not predictive', function () {
  return /*#__PURE__*/React.createElement(BundleAssets, {
    jobs: [_set(_merge({}, currentJob), 'metrics.webpack.assets', {
      'static/js/not-predictive.js': {
        name: 'static/js/not-predictive.93191a1.js',
        value: 2989
      }
    }), _set(_merge({}, baselineJob), 'metrics.webpack.assets', {
      'static/js/not-predictive.js': {
        name: 'static/js/not-predictive.93191a1.js',
        value: 2988
      }
    })]
  });
});