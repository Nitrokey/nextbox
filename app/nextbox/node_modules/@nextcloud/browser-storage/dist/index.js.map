{"version":3,"sources":["../lib/index.ts"],"names":["getBuilder","appId","StorageBuilder","clearStorage","storage","pred","Object","keys","filter","k","map","removeItem","bind","clearAll","storages","window","sessionStorage","localStorage","s","clearNonPersistent","startsWith","ScopedStorage","GLOBAL_SCOPE_PERSISTENT"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;;;AAEO,SAASA,UAAT,CAAoBC,KAApB,EAAmD;AACtD,SAAO,IAAIC,uBAAJ,CAAmBD,KAAnB,CAAP;AACH;;AAED,SAASE,YAAT,CAAsBC,OAAtB,EAAwCC,IAAxC,EAA0E;AACtEC,EAAAA,MAAM,CAACC,IAAP,CAAYH,OAAZ,EACKI,MADL,CACY,UAAAC,CAAC;AAAA,WAAIJ,IAAI,GAAGA,IAAI,CAACI,CAAD,CAAP,GAAa,IAArB;AAAA,GADb,EAEKC,GAFL,CAESN,OAAO,CAACO,UAAR,CAAmBC,IAAnB,CAAwBR,OAAxB,CAFT;AAGH;;AAEM,SAASS,QAAT,GAA0B;AAC7B,MAAMC,QAAQ,GAAG,CACbC,MAAM,CAACC,cADM,EAEbD,MAAM,CAACE,YAFM,CAAjB;AAIAH,EAAAA,QAAQ,CAACJ,GAAT,CAAa,UAAAQ,CAAC;AAAA,WAAIf,YAAY,CAACe,CAAD,CAAhB;AAAA,GAAd;AACH;;AAEM,SAASC,kBAAT,GAAoC;AACvC,MAAML,QAAQ,GAAG,CACbC,MAAM,CAACC,cADM,EAEbD,MAAM,CAACE,YAFM,CAAjB;AAIAH,EAAAA,QAAQ,CAACJ,GAAT,CAAa,UAAAQ,CAAC;AAAA,WAAIf,YAAY,CAACe,CAAD,EAAI,UAAAT,CAAC;AAAA,aAAI,CAACA,CAAC,CAACW,UAAF,CAAaC,uBAAcC,uBAA3B,CAAL;AAAA,KAAL,CAAhB;AAAA,GAAd;AACH","sourcesContent":["import StorageBuilder from './storagebuilder'\nimport ScopedStorage from './scopedstorage'\n\nexport function getBuilder(appId: string): StorageBuilder {\n    return new StorageBuilder(appId)\n}\n\nfunction clearStorage(storage: Storage, pred?: (string) => boolean): void {\n    Object.keys(storage)\n        .filter(k => pred ? pred(k) : true)\n        .map(storage.removeItem.bind(storage))\n}\n\nexport function clearAll(): void {\n    const storages = [\n        window.sessionStorage,\n        window.localStorage,\n    ]\n    storages.map(s => clearStorage(s))\n}\n\nexport function clearNonPersistent(): void {\n    const storages = [\n        window.sessionStorage,\n        window.localStorage,\n    ]\n    storages.map(s => clearStorage(s, k => !k.startsWith(ScopedStorage.GLOBAL_SCOPE_PERSISTENT)))\n}\n"],"file":"index.js"}